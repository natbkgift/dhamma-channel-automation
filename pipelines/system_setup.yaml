# Dhamma Channel Automation - System Setup Pipeline
# เฟสเตรียมระบบ (ครั้งแรก/ต่อเนื่อง)

pipeline: system_setup
version: 1.0
description: "Initialize and verify all system components"

steps:
  # 1. Prompt Pack/Workflow Diagram
  - id: prompt_pack
    uses: PromptPack
    description: "จัดการแพ็กพร็อมต์และไดอะแกรมเวิร์กโฟลว์"
    output: prompt_pack.json

  # 2. Agent Template
  - id: agent_template
    uses: AgentTemplate
    description: "แม่แบบสร้างเอเจนต์ใหม่"
    output: agent_template.json

  # 3. Security Agent
  - id: security
    uses: Security
    description: "ตรวจสอบความปลอดภัย API keys และ access control"
    output: security_check.json

  # 4. Integration Agent
  - id: integration
    uses: Integration
    description: "เชื่อมต่อระบบภายนอก (YouTube, Google Trends, etc.)"
    needs: [security]
    output: integration_status.json

  # 5. Data Sync Agent
  - id: data_sync
    uses: DataSync
    description: "ซิงก์ข้อมูลระหว่างระบบ"
    needs: [integration]
    output: data_sync_status.json

  # 6. Inventory/Index Agent
  - id: inventory_index
    uses: InventoryIndex
    description: "สแกนไฟล์เอเจนต์/พร็อมต์ บันทึกรายการและข้อมูลเบื้องต้น"
    needs: [data_sync]
    output: inventory.json

  # 7. Monitoring Agent
  - id: monitoring
    uses: Monitoring
    description: "เฝ้าระวังระบบและสถานะ"
    output: monitoring_status.json

  # 8. Notification Agent
  - id: notification
    uses: Notification
    description: "ระบบแจ้งเตือน"
    output: notification_config.json

  # 9. Error/Flag Agent
  - id: error_flag
    uses: ErrorFlag
    description: "จัดการข้อผิดพลาดและธงเตือน"
    output: error_system.json

  # 10. Dashboard Agent
  - id: dashboard
    uses: Dashboard
    description: "ศูนย์รวมสถานะและตัวชี้วัด"
    needs: [monitoring, notification, error_flag]
    output: dashboard.json

  # 11. Backup/Archive Agent
  - id: backup_archive
    uses: BackupArchive
    description: "สำรองและจัดเก็บข้อมูล"
    output: backup_config.json
